(this["webpackJsonpreact-oidc-client-js"]=this["webpackJsonpreact-oidc-client-js"]||[]).push([[0],{273:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},274:function(e,t,n){e.exports=n(665)},663:function(e,t,n){},664:function(e,t,n){},665:function(e,t,n){"use strict";n.r(t);n(171),n(183),n(184),n(185),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(200),n(284),n(285),n(102),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(302),n(304),n(305),n(209),n(138),n(306),n(307),n(308),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(214),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(332),n(333),n(335),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(348),n(349),n(350),n(351),n(352),n(353),n(221),n(355),n(356),n(357),n(358),n(359),n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(227),n(372),n(373),n(229),n(374),n(375),n(376),n(377),n(144),n(378),n(379),n(380),n(381),n(382),n(383),n(384),n(385),n(386),n(387),n(388),n(389),n(390),n(391),n(392),n(393),n(394),n(395),n(396),n(397),n(398),n(399),n(400),n(401),n(402),n(403),n(405),n(406),n(407),n(408),n(409),n(410),n(411),n(412),n(413),n(414),n(415),n(416),n(417),n(418),n(419),n(420),n(421),n(422),n(423),n(424),n(425),n(426),n(427),n(428),n(429),n(430),n(431),n(432),n(433),n(434),n(435),n(436),n(437),n(147),n(438),n(439),n(440),n(441),n(442),n(443),n(444),n(446),n(447),n(448),n(449),n(450),n(451),n(452),n(453),n(455),n(456),n(457),n(458),n(459),n(460),n(461),n(462),n(463),n(464),n(465),n(466),n(467),n(468),n(469),n(470),n(471),n(472),n(473),n(474),n(475),n(476),n(477),n(478),n(479),n(481),n(482),n(483),n(484),n(485),n(486),n(487),n(488),n(489),n(490),n(491),n(492),n(493),n(494),n(495),n(496),n(497),n(498),n(499),n(500),n(501),n(502),n(503),n(504),n(505),n(506),n(507),n(508),n(509),n(510),n(511),n(512),n(514),n(238),n(239),n(240),n(515),n(516),n(517),n(518),n(519),n(520),n(521),n(522),n(523),n(524),n(525),n(526),n(528),n(243),n(529),n(530),n(531);var o=n(1),a=n(55),r=n(29),i=n(36),c=n(54),s=n(53),l=n(170),u=n(57),h=n(271),d=n.n(h),p=function e(){Object(r.a)(this,e)};p.stsAuthority="https://issuer.zitadel.ch/",p.clientId="84891241816386203@zitadel_net",p.clientRoot="https://localhost:5001/hd-bearer/",p.clientScope="openid profile email",p.apiRoot="https://localhost:5001/";var g=function(){function e(t){Object(r.a)(this,e),this.authService=void 0,this.authService=t}return Object(i.a)(e,[{key:"callApi",value:function(e){var t=this;return this.authService.getUser().then((function(n){if(n&&n.access_token)return t._callApi(e,n.access_token).catch((function(n){if(401===n.response.status)return t.authService.renewToken().then((function(n){return t._callApi(e,n.access_token)}));throw n}));if(n)return t.authService.renewToken().then((function(n){return t._callApi(e,n.access_token)}));throw new Error("user is not logged in")}))}},{key:"_callApi",value:function(e,t){var n={Accept:"application/json",Authorization:"Bearer "+t};return d.a.get(p.apiRoot+e,{headers:n})}}]),e}(),m=n(95),f=function(){function e(t){Object(r.a)(this,e),this.userManager=void 0;var n=p.clientScope;t&&(n+=" urn:zitadel:iam:org:domain:primary:",n+=t),console.log("Constructed scope:",n),this.userManager=new m.UserManager({authority:p.stsAuthority,client_id:p.clientId,redirect_uri:"".concat(p.clientRoot,"signin-callback.html"),silent_redirect_uri:"".concat(p.clientRoot,"silent-renew.html"),post_logout_redirect_uri:"".concat(p.clientRoot),response_type:"code",scope:n}),m.Log.logger=console,m.Log.level=m.Log.INFO}return Object(i.a)(e,[{key:"getUser",value:function(){return this.userManager.getUser()}},{key:"login",value:function(){return this.userManager.signinRedirect()}},{key:"renewToken",value:function(){return this.userManager.signinSilent()}},{key:"logout",value:function(){return this.userManager.signoutRedirect()}}]),e}(),v=n(669),b=n(671),k=n(670),w=n(272),E=n.n(w),y=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"renderJsonData",value:function(){return v.a(b.a(this.props.data))&&v.a(k.a(this.props.data))?o.createElement(o.Fragment,null,o.createElement("h1",null,this.props.title),o.createElement(E.a,{data:this.props.data,theme:"bright",shouldExpandNode:this.props.shouldExpandNode})):null}},{key:"render",value:function(){return this.renderJsonData()}}]),n}(o.Component),S=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).shouldExpandNode=function(e,t,n){return!0},e}return Object(i.a)(n,[{key:"render",value:function(){return o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-6"},o.createElement(y,{data:this.props.user,title:"User Profile",shouldExpandNode:this.shouldExpandNode})),o.createElement("div",{className:"col-md-6"},o.createElement(y,{data:this.props.api,title:"Api Response",shouldExpandNode:this.shouldExpandNode})))}}]),n}(o.Component),j=function(e){return o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12 text-center",style:{marginTop:"30px"}},o.createElement("button",{className:"btn btn-primary btn-login",style:{margin:"10px"},onClick:e.login},"Login"),o.createElement("button",{className:"btn btn-secondary btn-getuser",style:{margin:"10px"},onClick:e.getUser},"Get User info"),o.createElement("button",{className:"btn btn-warning btn-getapi",style:{margin:"10px"},onClick:e.callApi},"Call API"),o.createElement("button",{className:"btn btn-success btn-renewtoken",style:{margin:"10px"},onClick:e.renewToken},"Renew Token"),o.createElement("button",{className:"btn btn-dark btn-logout",style:{margin:"10px"},onClick:e.logout},"Logout")))},N=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(e){var o,a;Object(r.a)(this,n),(a=t.call(this,e)).authService=void 0,a.apiService=void 0,a.shouldCancel=void 0,a.login=function(){a.authService.login()},a.callApi=function(){a.apiService.callApi("authed/hd-bearer").then((function(e){a.setState({api:e.data}),u.b.success("Api return successfully data, check in section - Api response")})).catch((function(e){u.b.error(e)}))},a.renewToken=function(){a.authService.renewToken().then((function(e){u.b.success("Token has been sucessfully renewed. :-)"),a.getUser()})).catch((function(e){u.b.error(e)}))},a.logout=function(){a.authService.logout()},a.getUser=function(){a.authService.getUser().then((function(e){e?u.b.success("User has been successfully loaded from store."):u.b.info("You are not logged in."),a.shouldCancel||a.setState({user:e})}))};var i=null!==(o=sessionStorage.getItem("hd-bearer-hd"))&&void 0!==o?o:"smartive.zitadel.ch";return a.authService=new f(i),a.apiService=new g(a.authService),a.state={user:{},api:{},hostedDomain:null!==i&&void 0!==i?i:""},a.shouldCancel=!1,a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.getUser()}},{key:"componentWillUnmount",value:function(){this.shouldCancel=!0}},{key:"render",value:function(){var e=this;return o.createElement(o.Fragment,null,o.createElement(u.a,null),o.createElement("div",{style:{textAlign:"center",margin:"1rem"}},o.createElement("label",{style:{display:"block",marginBottom:"1rem"}},"Hosted Domain (enforced)"),o.createElement("input",{type:"text",value:this.state.hostedDomain,onChange:function(t){sessionStorage.setItem("hd-bearer-hd",t.target.value),e.setState(Object(l.a)(Object(l.a)({},e.state),{},{hostedDomain:t.target.value})),e.authService=new f(t.target.value),e.apiService=new g(e.authService)}})),o.createElement(j,{login:this.login,logout:this.logout,renewToken:this.renewToken,getUser:this.getUser,callApi:this.callApi}),o.createElement(S,{api:this.state.api,user:this.state.user}))}}]),n}(o.Component);function A(e){return o.createElement("header",{className:"App-header"},o.createElement("img",{src:e.logoSrc,className:"App-logo",alt:"logo"}),o.createElement("h1",{className:"App-title"},e.pageTitle))}var O=n(273),x=n.n(O),C=(n(663),function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return o.createElement("div",{className:"App"},o.createElement(A,{pageTitle:"Welcome to React and oidc-client-js",logoSrc:x.a}),o.createElement("div",{className:"container-fluid"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col"},o.createElement(N,null)))))}}]),n}(o.Component)),_=(n(664),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function U(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a.render(o.createElement(C,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/hd-bearer",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/hd-bearer","/service-worker.js");_?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):U(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):U(e)}))}}()}},[[274,1,2]]]);
//# sourceMappingURL=main.1f84db4e.chunk.js.map